<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Online IDE</title>
    <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/editor/editor.main.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1e1e1e;
            color: #d4d4d4;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        #header {
            background-color: #2d2d30;
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 20px;
            border-bottom: 1px solid #3e3e42;
        }

        #header h1 {
            font-size: 20px;
            font-weight: normal;
            color: #cccccc;
        }

        .toolbar {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        .btn {
            background-color: #0e639c;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s;
        }

        .btn:hover {
            background-color: #1177bb;
        }

        .btn:disabled {
            background-color: #3e3e42;
            cursor: not-allowed;
        }

        .btn-success {
            background-color: #4ec9b0;
        }

        .btn-success:hover {
            background-color: #3ca08a;
        }

        .btn-warning {
            background-color: #d19a66;
        }

        .btn-warning:hover {
            background-color: #b8864f;
        }

        #main-container {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        #sidebar {
            width: 200px;
            background-color: #252526;
            border-right: 1px solid #3e3e42;
            display: flex;
            flex-direction: column;
        }

        #file-explorer {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .file-tree {
            list-style: none;
        }

        .file-item {
            padding: 4px 8px;
            cursor: pointer;
            border-radius: 3px;
            display: flex;
            align-items: center;
            gap: 5px;
            user-select: none;
        }

        .file-item:hover {
            background-color: #2a2d2e;
        }

        .file-item.active {
            background-color: #094771;
        }

        .file-icon {
            width: 16px;
            height: 16px;
            display: inline-block;
        }

        #content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        #tabs {
            background-color: #2d2d30;
            display: flex;
            border-bottom: 1px solid #3e3e42;
            overflow-x: auto;
        }

        .tab {
            padding: 8px 16px;
            cursor: pointer;
            border-right: 1px solid #3e3e42;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .tab:hover {
            background-color: #323233;
        }

        .tab.active {
            background-color: #1e1e1e;
            border-bottom: 2px solid #007acc;
        }

        .tab-close {
            margin-left: 5px;
            cursor: pointer;
            opacity: 0.6;
        }

        .tab-close:hover {
            opacity: 1;
        }

        #editor-container {
            flex: 1;
            display: flex;
        }

        #editor {
            flex: 1;
        }

        #terminal-container {
            width: 40%;
            background-color: #1e1e1e;
            border-left: 1px solid #3e3e42;
            display: flex;
            flex-direction: column;
        }

        #terminal-header {
            background-color: #2d2d30;
            padding: 8px 12px;
            border-bottom: 1px solid #3e3e42;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #terminal {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 14px;
        }

        #terminal-output {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        #terminal-input-line {
            display: flex;
            margin-top: 10px;
        }

        #terminal-prompt {
            color: #4ec9b0;
            margin-right: 5px;
        }

        #terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #d4d4d4;
            font-family: inherit;
            font-size: inherit;
            outline: none;
        }

        .loading {
            color: #dcdcaa;
        }

        .error {
            color: #f44747;
        }

        .success {
            color: #4ec9b0;
        }

        .output {
            color: #cccccc;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: #2d2d30;
            margin: 20% auto;
            padding: 20px;
            border: 1px solid #3e3e42;
            width: 300px;
            border-radius: 5px;
        }

        .modal-content input {
            width: 100%;
            padding: 8px;
            margin: 10px 0;
            background-color: #1e1e1e;
            border: 1px solid #3e3e42;
            color: #d4d4d4;
            border-radius: 3px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 15px;
        }

        .resize-handle {
            width: 5px;
            background-color: #3e3e42;
            cursor: col-resize;
            position: relative;
        }

        .resize-handle:hover {
            background-color: #007acc;
        }

        .memory-info {
            font-size: 12px;
            opacity: 0.7;
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>Python Online IDE</h1>
        <div class="toolbar">
            <button class="btn" onclick="newFile()">New File</button>
            <button class="btn" onclick="saveFile()">Save</button>
            <button class="btn btn-success" onclick="runCode()">‚ñ∂ Run</button>
            <button class="btn" onclick="clearTerminal()">Clear Terminal</button>
            <button class="btn btn-warning" onclick="clearMemory()">Clear Memory</button>
        </div>
    </div>

    <div id="main-container">
        <div id="sidebar">
            <div id="file-explorer">
                <h3 style="margin-bottom: 10px; font-size: 14px;">FILES</h3>
                <ul id="file-tree" class="file-tree"></ul>
            </div>
        </div>

        <div id="content">
            <div id="tabs"></div>
            <div id="editor-container">
                <div id="editor"></div>
                <div class="resize-handle" id="resize-handle"></div>
                <div id="terminal-container">
                    <div id="terminal-header">
                        <span>TERMINAL</span>
                        <span class="memory-info" id="memory-info">Memory: 0 KB</span>
                    </div>
                    <div id="terminal">
                        <div id="terminal-output">
                            <div class="loading">Loading Python environment...</div>
                        </div>
                        <div id="terminal-input-line" style="display: none;">
                            <span id="terminal-prompt">&gt;&gt;&gt;</span>
                            <input type="text" id="terminal-input" autofocus>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- New File Modal -->
    <div id="newFileModal" class="modal">
        <div class="modal-content">
            <h3>New File</h3>
            <input type="text" id="newFileName" placeholder="filename.py">
            <div class="modal-buttons">
                <button class="btn" onclick="closeModal()">Cancel</button>
                <button class="btn btn-success" onclick="createFile()">Create</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <script>
        // Initialize global variables immediately for testing accessibility
        window.currentFile = null;
        window.files = new Map();
        window.openTabs = [];
        window.exampleFiles = [
            'welcome.py',
            '01_hello_world.py',
            '02_variables.py',
            '03_lists.py',
            '04_dictionaries.py',
            '05_control_flow.py',
            '06_loops.py',
            '07_functions.py',
            '08_classes.py',
            '09_errors.py',
            '10_modules.py'
        ];
        
        // exampleTemplates will be initialized later with full content
        
        // Initialize local variables
        let pyodide;
        let editor;
        let maxTerminalLines = 500;
        let maxOpenTabs = 3;
        let terminalLineCount = 0;
        
        // Initialize functions immediately for testing (proper implementation follows)
        window.loadFile = function(filename) {
            console.log('loadFile called early:', filename);
            // Will be replaced by full implementation
        };
        
        window.updateFileTree = function() {
            console.log('updateFileTree called early');
            const fileTree = document.getElementById('file-tree');
            if (fileTree && window.exampleFiles) {
                fileTree.innerHTML = '';
                window.exampleFiles.forEach(fileName => {
                    const li = document.createElement('li');
                    li.className = 'file-item' + (fileName === window.currentFile ? ' active' : '');
                    li.onclick = () => window.loadFile(fileName);
                    const isLoaded = window.files.has(fileName);
                    const icon = isLoaded ? 'üìÑ' : 'üìã';
                    li.innerHTML = `<span class="file-icon">${icon}</span> ${fileName}`;
                    fileTree.appendChild(li);
                });
                console.log('File tree populated with', window.exampleFiles.length, 'items');
            } else {
                console.error('File tree element or exampleFiles not found');
            }
        };

        // Library loading is now handled in specific initialization functions

        // Terminal elements
        const terminalOutput = document.getElementById('terminal-output');
        const terminalInput = document.getElementById('terminal-input');
        const terminalInputLine = document.getElementById('terminal-input-line');
        const memoryInfo = document.getElementById('memory-info');

        // Example files list already initialized at top of script

        // Load templates with proper formatting
        window.exampleTemplates = {};
        
        // Helper function to create properly formatted templates
        function addTemplate(name, content) {
            window.exampleTemplates[name] = content.replace(/\\n/g, '\n');
        }
        window.exampleTemplates['welcome.py'] = `# Ê¨¢ËøéÊù•Âà∞PythonÂú®Á∫øÁºñÁ®ãÁéØÂ¢ÉÔºÅüêç
# Welcome to Python Online IDE!

# ËøôÊòØ‰∏Ä‰∏™ÂÆåÂÖ®Âú®ÊµèËßàÂô®‰∏≠ËøêË°åÁöÑPythonÂºÄÂèëÁéØÂ¢É
# This is a Python development environment that runs entirely in your browser

print("üéâ Ê¨¢ËøéÂ≠¶‰π†PythonÁºñÁ®ãÔºÅ")
print("Welcome to Python Programming!")
print("ÊÇ®ÁöÑÁºñÁ®ãÂ≠¶‰π†‰πãÊóÖ‰ªéËøôÈáåÂºÄÂßãÔºÅ")
print("Your programming journey begins here!")

# ËØïÁùÄ‰øÆÊîπ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºåÁÑ∂ÂêéÁÇπÂáª"ËøêË°å"ÊåâÈíÆÁúãÁúãÊïàÊûú
# Try modifying the code below, then click the "Run" button to see the result
name = "ÊÇ®ÁöÑÂßìÂêç"  # ËØ∑Êää"ÊÇ®ÁöÑÂßìÂêç"ÊîπÊàê‰Ω†ÁöÑÁúüÂÆûÂßìÂêçÔºÅ
print(f"‰Ω†Â•ΩÔºå{name}ÔºÅÁ•ù‰Ω†ÁºñÁ®ãÊÑâÂø´ÔºÅüöÄ")

# Â≠¶‰π†Âª∫ËÆÆÔºö
# Learning tips:
# 1. ÁÇπÂáªÂ∑¶‰æßÊñá‰ª∂ÂàóË°®‰∏≠ÁöÑÂÖ∂‰ªñÁ§∫‰æãÊñá‰ª∂Êù•Â≠¶‰π†Êõ¥Â§öPythonÊ¶ÇÂøµ
#    Click on other example files in the left sidebar to learn more Python concepts
# 2. ÊØè‰∏™Êñá‰ª∂ÈÉΩÂåÖÂê´ËØ¶ÁªÜÁöÑ‰∏≠ÊñáÊ≥®ÈáäÂíåËØ¥Êòé
#    Each file contains detailed Chinese comments and explanations  
# 3. Â∞ùËØï‰øÆÊîπ‰ª£Á†ÅÂπ∂ËøêË°åÔºåËøôÊòØÂ≠¶‰π†ÁºñÁ®ãÁöÑÊúÄÂ•ΩÊñπÊ≥ï
#    Try modifying the code and running it - this is the best way to learn programming
# 4. Â¶ÇÊûúÈÅáÂà∞ÈîôËØØÔºå‰ªîÁªÜÈòÖËØªÁªàÁ´Ø‰∏≠ÁöÑÈîôËØØ‰ø°ÊÅØ
#    If you encounter errors, carefully read the error messages in the terminal

print("\nÂºÄÂßã‰Ω†ÁöÑPythonÂ≠¶‰π†‰πãÊóÖÂêßÔºÅLet's start your Python learning journey!")`;
        addTemplate('01_hello_world.py', '# Á¨¨‰∏ÄËØæÔºöPythonÂü∫Á°ÄÂíåHello WorldÁ®ãÂ∫è\\n# ËøôÊòØ‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™PythonÁ®ãÂ∫è\\n\\nprint(\\\"Hello, World!\\\")\\nprint(\\\"‰Ω†Â•ΩÔºå‰∏ñÁïå!\\\")\\n\\n# ‰ΩøÁî®ÂèòÈáè\\nname = \\\"PythonÂ≠¶‰π†ËÄÖ\\\"\\nprint(f\\\"‰Ω†Â•ΩÔºå{name}!\\\")\\n\\n# PythonÂèØ‰ª•ÂÅöÊï∞Â≠¶ËÆ°ÁÆó\\nprint(f\\\"2 + 2 = {2 + 2}\\\")\\nprint(f\\\"10 - 3 = {10 - 3}\\\")\\nprint(f\\\"4 * 5 = {4 * 5}\\\")\\nprint(f\\\"15 / 3 = {15 / 3}\\\")');
        
        addTemplate('02_variables.py', '# Á¨¨‰∫åËØæÔºöÂèòÈáèÂíåÊï∞ÊçÆÁ±ªÂûã\\n# Variables and Data Types\\n\\n# Êï∞Â≠ó\\nage = 25\\nheight = 1.75\\nprint(f\\\"Âπ¥ÈæÑ: {age}Â≤Å\\\")\\nprint(f\\\"Ë∫´È´ò: {height}Á±≥\\\")\\n\\n# ÊñáÂ≠ó\\nname = \\\"Âº†‰∏â\\\"\\ncity = \\\"Âåó‰∫¨\\\"\\nprint(f\\\"ÂßìÂêç: {name}\\\")\\nprint(f\\\"ÂüéÂ∏Ç: {city}\\\")\\n\\n# Â∏ÉÂ∞îÂÄº\\nis_student = True\\nprint(f\\\"ÊòØÂ≠¶ÁîüÂêó: {is_student}\\\")');
        
        addTemplate('03_lists.py', '# Á¨¨‰∏âËØæÔºöÂàóË°®\\n# Lists in Python\\n\\n# ÂàõÂª∫ÂàóË°®\\nfruits = [\\\"ËãπÊûú\\\", \\\"È¶ôËïâ\\\", \\\"Ê©ôÂ≠ê\\\"]\\nnumbers = [1, 2, 3, 4, 5]\\n\\nprint(\\\"Ê∞¥ÊûúÂàóË°®:\\\", fruits)\\nprint(\\\"Êï∞Â≠óÂàóË°®:\\\", numbers)\\n\\n# ËÆøÈóÆÂÖÉÁ¥†\\nprint(f\\\"Á¨¨‰∏Ä‰∏™Ê∞¥Êûú: {fruits[0]}\\\")\\nprint(f\\\"ÊúÄÂêé‰∏Ä‰∏™Ê∞¥Êûú: {fruits[-1]}\\\")\\n\\n# Ê∑ªÂä†ÂÖÉÁ¥†\\nfruits.append(\\\"Ëë°ËêÑ\\\")\\nprint(\\\"Ê∑ªÂä†Âêé:\\\", fruits)\\n\\n# ÈÅçÂéÜÂàóË°®\\nfor fruit in fruits:\\n    print(f\\\"Ê∞¥Êûú: {fruit}\\\")');
        
        addTemplate('04_dictionaries.py', '# Á¨¨ÂõõËØæÔºöÂ≠óÂÖ∏ - ÈîÆÂÄºÂØπÊï∞ÊçÆÁªìÊûÑ\\n# Lesson 4: Dictionaries - Key-Value Data Structure\\n\\n# Â≠óÂÖ∏ÊòØ‰∏ÄÁßçÂ≠òÂÇ®ÈîÆÂÄºÂØπÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ∞±ÂÉèÁé∞ÂÆû‰∏≠ÁöÑÂ≠óÂÖ∏‰∏ÄÊ†∑\\n# Dictionaries store key-value pairs, just like a real dictionary\\n\\n# 1. ÂàõÂª∫Â≠óÂÖ∏\\n# ==========\\n\\n# ‰∏™‰∫∫‰ø°ÊÅØÂ≠óÂÖ∏\\nperson = {\\n    "ÂßìÂêç": "Âº†‰∏â",\\n    "Âπ¥ÈæÑ": 25,\\n    "ÂüéÂ∏Ç": "Âåó‰∫¨",\\n    "ËÅå‰∏ö": "Á®ãÂ∫èÂëò"\\n}\\n\\nprint("‰∏™‰∫∫‰ø°ÊÅØ:", person)\\nprint("Person info:", person)\\n\\n# 2. ËÆøÈóÆÂ≠óÂÖ∏‰∏≠ÁöÑÂÄº\\n# ===============\\n\\nprint("\\\\n=== ËÆøÈóÆÂ≠óÂÖ∏ÂÄº ===")\\nprint(f"ÂßìÂêç: {person[\\"ÂßìÂêç\\"]}")\\nprint(f"Âπ¥ÈæÑ: {person[\\"Âπ¥ÈæÑ\\"]}Â≤Å")\\nprint(f"ÂüéÂ∏Ç: {person[\\"ÂüéÂ∏Ç\\"]}")\\n\\n# ‰ΩøÁî®get()ÊñπÊ≥ïÊõ¥ÂÆâÂÖ®Âú∞ËÆøÈóÆÔºàÂ¶ÇÊûúÈîÆ‰∏çÂ≠òÂú®‰∏ç‰ºöÊä•ÈîôÔºâ\\nprint(f"ËÅå‰∏ö: {person.get(\\"ËÅå‰∏ö\\", \\"Êú™Áü•\\")}")\\nprint(f"Ëñ™ËµÑ: {person.get(\\"Ëñ™ËµÑ\\", \\"Êú™ËÆæÁΩÆ\\")}")  # Ëøô‰∏™ÈîÆ‰∏çÂ≠òÂú®\\n\\n# 3. ‰øÆÊîπÂíåÊ∑ªÂä†ÂÄº\\n# =============\\n\\nprint("\\\\n=== ‰øÆÊîπÂ≠óÂÖ∏ ===")\\n# ‰øÆÊîπÁé∞ÊúâÁöÑÂÄº\\nperson[\\"Âπ¥ÈæÑ\\"] = 26\\nprint("ÁîüÊó•ÂêéÂπ¥ÈæÑ:", person[\\"Âπ¥ÈæÑ\\"])\\n\\n# Ê∑ªÂä†Êñ∞ÁöÑÈîÆÂÄºÂØπ\\nperson[\\"ÈÇÆÁÆ±\\"] = \\"zhangsan@example.com\\"\\nperson[\\"Áà±Â•Ω\\"] = [\\"ÁºñÁ®ã\\", \\"ÈòÖËØª\\", \\"ËøêÂä®\\"]\\nprint("Ê∑ªÂä†ÈÇÆÁÆ±ÂíåÁà±Â•ΩÂêé:", person)\\n\\n# 4. Âà†Èô§Â≠óÂÖ∏ÂÖÉÁ¥†\\n# =============\\n\\nprint("\\\\n=== Âà†Èô§ÂÖÉÁ¥† ===")\\n# ‰ΩøÁî®delÂà†Èô§\\nif \\"ËÅå‰∏ö\\" in person:\\n    del person[\\"ËÅå‰∏ö\\"]\\n    print("Âà†Èô§ËÅå‰∏öÂêé:", person)\\n\\n# ‰ΩøÁî®pop()Âà†Èô§Âπ∂ËøîÂõûÂÄº\\nremoved_hobby = person.pop(\\"Áà±Â•Ω\\", \\"Ê≤°ÊúâËøô‰∏™ÈîÆ\\")\\nprint(f"Âà†Èô§ÁöÑÁà±Â•Ω: {removed_hobby}")\\n\\n# 5. Â≠óÂÖ∏ÁöÑÂ∏∏Áî®ÊñπÊ≥ï\\n# ===============\\n\\nprint("\\\\n=== Â≠óÂÖ∏‰ø°ÊÅØ ===")\\nprint(f"Â≠óÂÖ∏ÈïøÂ∫¶: {len(person)}‰∏™È°πÁõÆ")\\nprint(f"ÊâÄÊúâÈîÆ: {list(person.keys())}")\\nprint(f"ÊâÄÊúâÂÄº: {list(person.values())}")\\nprint(f"ÊâÄÊúâÈîÆÂÄºÂØπ: {list(person.items())}")\\n\\n# 6. ÈÅçÂéÜÂ≠óÂÖ∏\\n# ==========\\n\\nprint("\\\\n=== ÈÅçÂéÜÂ≠óÂÖ∏ ===")\\n# ÈÅçÂéÜÈîÆ\\nprint("ÊâÄÊúâÈîÆ:")\\nfor key in person:\\n    print(f"  - {key}")\\n\\n# ÈÅçÂéÜÂÄº\\nprint("\\\\nÊâÄÊúâÂÄº:")\\nfor value in person.values():\\n    print(f"  - {value}")\\n\\n# ÈÅçÂéÜÈîÆÂÄºÂØπ\\nprint("\\\\nÈîÆÂÄºÂØπ:")\\nfor key, value in person.items():\\n    print(f"  {key}: {value}")\\n\\n# 7. ÂµåÂ•óÂ≠óÂÖ∏\\n# ==========\\n\\nprint("\\\\n=== ÂµåÂ•óÂ≠óÂÖ∏ ===")\\nstudents = {\\n    \\"Â≠¶Áîü1\\": {\\n        \\"ÂßìÂêç\\": \\"ÊùéÂõõ\\",\\n        \\"Âπ¥ÈæÑ\\": 20,\\n        \\"ÊàêÁª©\\": {\\"ËØ≠Êñá\\": 85, \\"Êï∞Â≠¶\\": 92, \\"Ëã±ËØ≠\\": 78}\\n    },\\n    \\"Â≠¶Áîü2\\": {\\n        \\"ÂßìÂêç\\": \\"Áéã‰∫î\\",\\n        \\"Âπ¥ÈæÑ\\": 21,\\n        \\"ÊàêÁª©\\": {\\"ËØ≠Êñá\\": 90, \\"Êï∞Â≠¶\\": 88, \\"Ëã±ËØ≠\\": 95}\\n    }\\n}\\n\\nprint("Áè≠Á∫ß‰ø°ÊÅØ:")\\nfor student_id, info in students.items():\\n    name = info[\\"ÂßìÂêç\\"]\\n    age = info[\\"Âπ¥ÈæÑ\\"]\\n    math_score = info[\\"ÊàêÁª©\\"][\\"Êï∞Â≠¶\\"]\\n    print(f"  {student_id}: {name}Ôºå{age}Â≤ÅÔºåÊï∞Â≠¶ÊàêÁª©Ôºö{math_score}ÂàÜ")\\n\\n# 8. ÁªÉ‰π†È¢ò\\n# ========\\nprint("\\\\n=== ÁªÉ‰π†Êó∂Èó¥ ===")\\n# ÂàõÂª∫‰Ω†Ëá™Â∑±ÁöÑ‰∏™‰∫∫Ê°£Ê°àÂ≠óÂÖ∏\\nmy_profile = {\\n    \\"ÂßìÂêç\\": \\"‰Ω†ÁöÑÂêçÂ≠ó\\",\\n    \\"Âπ¥ÈæÑ\\": 18,\\n    \\"ÂüéÂ∏Ç\\": \\"‰Ω†ÁöÑÂüéÂ∏Ç\\",\\n    \\"Áà±Â•Ω\\": [\\"ÁºñÁ®ã\\", \\"Â≠¶‰π†\\"]\\n}\\n\\nprint("ÊàëÁöÑÊ°£Ê°à:", my_profile)\\n\\n# ÊåëÊàòÔºöÊ∑ªÂä†Êõ¥Â§ö‰ø°ÊÅØÂà∞‰Ω†ÁöÑÊ°£Ê°à‰∏≠ÔºåÊØîÂ¶ÇÂ≠¶Ê†°„ÄÅ‰∏ì‰∏öÁ≠â');
        
        addTemplate('05_control_flow.py', '# Á¨¨‰∫îËØæÔºöÊù°‰ª∂ÊéßÂà∂ - ËÆ©Á®ãÂ∫èÂÅöÂÜ≥ÂÆö\\n# Lesson 5: Control Flow - Making Decisions\\n\\n# Êù°‰ª∂ËØ≠Âè•ËÆ©Á®ãÂ∫èÊ†πÊçÆ‰∏çÂêåÊÉÖÂÜµÊâßË°å‰∏çÂêåÁöÑ‰ª£Á†Å\\n# Conditional statements allow programs to execute different code based on conditions\\n\\n# 1. Âü∫Êú¨ifËØ≠Âè•\\n# ===========\\n\\nprint("=== Âü∫Êú¨Êù°‰ª∂Âà§Êñ≠ ===")\\nage = 18\\nprint(f"Âπ¥ÈæÑ: {age}Â≤Å")\\n\\nif age >= 18:\\n    print("‰Ω†Â∑≤ÁªèÊàêÂπ¥‰∫ÜÔºÅ")\\n    print("You are an adult!")\\nelse:\\n    print("‰Ω†ËøòÊú™ÊàêÂπ¥")\\n    print("You are a minor")\\n\\n# 2. Â§öÈáçÊù°‰ª∂ (elif)\\n# ================\\n\\nprint("\\\\n=== ÊàêÁª©Á≠âÁ∫ßÂà§Êñ≠ ===")\\nscore = 85\\nprint(f"ËÄÉËØïÊàêÁª©: {score}ÂàÜ")\\n\\nif score >= 90:\\n    grade = "‰ºòÁßÄ"\\n    comment = "Â§™Ê£í‰∫ÜÔºÅ"\\nelif score >= 80:\\n    grade = "ËâØÂ•Ω"\\n    comment = "‰∏çÈîôÂì¶ÔºÅ"\\nelif score >= 70:\\n    grade = "‰∏≠Á≠â"\\n    comment = "ËøòÈúÄÂä™Âäõ"\\nelif score >= 60:\\n    grade = "ÂèäÊ†º"\\n    comment = "ÂàöÂ•ΩÂèäÊ†º"\\nelse:\\n    grade = "‰∏çÂèäÊ†º"\\n    comment = "ÈúÄË¶ÅÂä†Ê≤πÔºÅ"\\n\\nprint(f"Á≠âÁ∫ß: {grade} - {comment}")\\n\\n# 3. Â§çÂêàÊù°‰ª∂\\n# ==========\\n\\nprint("\\\\n=== Â§©Ê∞îÂª∫ËÆÆ ===")\\ntemperature = 25  # Ê∏©Â∫¶\\nis_sunny = True   # ÊòØÂê¶Êô¥Â§©\\nis_weekend = True # ÊòØÂê¶Âë®Êú´\\n\\nprint(f"Ê∏©Â∫¶: {temperature}¬∞C")\\nprint(f"Êô¥Â§©: {is_sunny}")\\nprint(f"Âë®Êú´: {is_weekend}")\\n\\n# ‰ΩøÁî®and (Âπ∂‰∏î)\\nif temperature > 20 and is_sunny:\\n    print("Â§©Ê∞îÂæàÂ•ΩÔºåÈÄÇÂêàÂá∫Èó®ÔºÅ")\\n\\n# ‰ΩøÁî®or (ÊàñËÄÖ)\\nif temperature > 30 or temperature < 10:\\n    print("Ê∏©Â∫¶ÊØîËæÉÊûÅÁ´Ø")\\n\\n# ‰ΩøÁî®andËøûÊé•Â§ö‰∏™Êù°‰ª∂\\nif temperature > 15 and is_sunny and is_weekend:\\n    print("ÂÆåÁæéÁöÑÂë®Êú´ÔºÅÂéªÂÖ¨Âõ≠Ëµ∞Ëµ∞ÂêßÔºÅ")\\nelif is_weekend:\\n    print("ËôΩÁÑ∂ÊòØÂë®Êú´Ôºå‰ΩÜÂ§©Ê∞î‰∏ÄËà¨")\\nelse:\\n    print("Â∑•‰ΩúÊó•Ôºå‰∏ìÂøÉÂ∑•‰ΩúÂêß")\\n\\n# 4. ‰ΩøÁî®not (Èùû)\\n# =============\\n\\nprint("\\\\n=== ÁôªÂΩïÊ£ÄÊü• ===")\\nhas_account = True\\nremember_password = False\\n\\nif has_account and not remember_password:\\n    print("ÊúâË¥¶Âè∑‰ΩÜÂøòËÆ∞ÂØÜÁ†Å‰∫ÜÔºåËØ∑ÈáçÁΩÆÂØÜÁ†Å")\\nelif not has_account:\\n    print("Ê≤°ÊúâË¥¶Âè∑ÔºåËØ∑ÂÖàÊ≥®ÂÜå")\\nelse:\\n    print("Ê¨¢ËøéÁôªÂΩïÔºÅ")\\n\\n# 5. ‰ΩøÁî®inÊìç‰ΩúÁ¨¶\\n# =============\\n\\nprint("\\\\n=== ÂñúÂ•ΩÊ£ÄÊü• ===")\\nfavorite_colors = ["Á∫¢Ëâ≤", "ËìùËâ≤", "ÁªøËâ≤"]\\nuser_color = "ËìùËâ≤"\\n\\nif user_color in favorite_colors:\\n    print(f"{user_color}ÊòØÊàëÂñúÊ¨¢ÁöÑÈ¢úËâ≤‰πã‰∏ÄÔºÅ")\\nelse:\\n    print(f"{user_color}‰∏çÊòØÊàëÂñúÊ¨¢ÁöÑÈ¢úËâ≤")\\n\\n# 6. ÂµåÂ•óÊù°‰ª∂\\n# ==========\\n\\nprint("\\\\n=== Ë¥≠Áâ©ÊäòÊâ£ ===")\\nis_member = True\\npurchase_amount = 150\\n\\nif is_member:\\n    print("‰Ω†ÊòØ‰ºöÂëòÔºÅ")\\n    if purchase_amount >= 100:\\n        discount = 0.2  # 20%ÊäòÊâ£\\n        print("Ë¥≠‰π∞Êª°100ÂÖÉÔºå‰∫´Âèó20%‰ºöÂëòÊäòÊâ£ÔºÅ")\\n    else:\\n        discount = 0.1  # 10%ÊäòÊâ£\\n        print("‰ºöÂëò‰∫´Âèó10%ÊäòÊâ£")\\nelse:\\n    print("‰∏çÊòØ‰ºöÂëò")\\n    if purchase_amount >= 200:\\n        discount = 0.05  # 5%ÊäòÊâ£\\n        print("Ë¥≠‰π∞Êª°200ÂÖÉÔºå‰∫´Âèó5%ÊäòÊâ£")\\n    else:\\n        discount = 0\\n        print("Êó†ÊäòÊâ£")\\n\\nfinal_price = purchase_amount * (1 - discount)\\nprint(f"Âéü‰ª∑: {purchase_amount}ÂÖÉ")\\nprint(f"ÊúÄÁªà‰ª∑Ê†º: {final_price}ÂÖÉ")\\n\\n# 7. ÂÆûÈôÖÂ∫îÁî®Á§∫‰æã\\n# =============\\n\\nprint("\\\\n=== Â≠¶Áîü‰ø°ÊÅØÁ≥ªÁªü ===")\\nstudent_age = 16\\nstudent_grade = 88\\nhas_homework = False\\n\\nprint(f"Â≠¶ÁîüÂπ¥ÈæÑ: {student_age}Â≤Å")\\nprint(f"ËÄÉËØïÊàêÁª©: {student_grade}ÂàÜ")\\nprint(f"ÂÆåÊàê‰Ωú‰∏ö: {has_homework}")\\n\\n# ÁªºÂêàÂà§Êñ≠\\nif student_age < 18:\\n    print("Êú™ÊàêÂπ¥Â≠¶Áîü")\\n    if student_grade >= 85 and has_homework:\\n        print("‰ºòÁßÄÂ≠¶ÁîüÔºåÁªô‰∫àË°®Êâ¨ÔºÅ")\\n    elif student_grade >= 85:\\n        print("ÊàêÁª©‰ºòÁßÄÔºå‰ΩÜË¶ÅËÆ∞ÂæóÂÆåÊàê‰Ωú‰∏ö")\\n    elif has_homework:\\n        print("‰Ωú‰∏öÂÆåÊàêËâØÂ•ΩÔºåÁªßÁª≠Âä†Ê≤πÊèêÈ´òÊàêÁª©")\\n    else:\\n        print("ÈúÄË¶ÅÊõ¥Âä†Âä™ÂäõÂ≠¶‰π†")\\nelse:\\n    print("ÊàêÂπ¥Â≠¶ÁîüÔºåË¶ÅÊõ¥Âä†Ëá™Ëßâ")\\n\\n# 8. ÁªÉ‰π†È¢ò\\n# ========\\nprint("\\\\n=== ÁªÉ‰π†Êó∂Èó¥ ===")\\n# ÂàõÂª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑËÆ°ÁÆóÂô®\\nnum1 = 10\\nnum2 = 3\\noperation = "+"  # ÂèØ‰ª•ÊîπÊàê "-", "*", "/"\\n\\nprint(f"ËÆ°ÁÆó: {num1} {operation} {num2}")\\n\\nif operation == "+":\\n    result = num1 + num2\\nelif operation == "-":\\n    result = num1 - num2\\nelif operation == "*":\\n    result = num1 * num2\\nelif operation == "/":\\n    if num2 != 0:\\n        result = num1 / num2\\n    else:\\n        result = "ÈîôËØØÔºö‰∏çËÉΩÈô§‰ª•0"\\nelse:\\n    result = "Êú™Áü•Êìç‰Ωú"\\n\\nprint(f"ÁªìÊûú: {result}")\\n\\n# ÊåëÊàòÔºöÂàõÂª∫‰∏Ä‰∏™Âπ¥ÈæÑÂàÜÁªÑÁ®ãÂ∫èÔºåÊ†πÊçÆÂπ¥ÈæÑÂà§Êñ≠ÊòØÂÑøÁ´•„ÄÅÈùíÂ∞ëÂπ¥„ÄÅÊàêÂπ¥‰∫∫ËøòÊòØËÄÅÂπ¥‰∫∫');
        
        addTemplate('06_loops.py', '# Loops - Repeating Actions\\n# for and while loops\\n\\n# For loop with range\\nprint("Counting to 5:")\\nfor i in range(1, 6):\\n    print(f"  Count: {i}")\\n\\n# For loop with list\\ncolors = ["red", "green", "blue", "yellow"]\\nprint("Colors:")\\nfor color in colors:\\n    print(f"  - {color.upper()}")\\n\\n# While loop\\ncount = 3\\nwhile count > 0:\\n    print(f"  {count}...")\\n    count -= 1\\nprint("  Done!")');
        
        addTemplate('07_functions.py', '# Functions - Reusable Code Blocks\\n\\n# Simple function\\ndef greet(name):\\n    return f"Hello, {name}!"\\n\\nmessage = greet("Alice")\\nprint(message)\\n\\n# Function with multiple parameters\\ndef calculate_area(length, width):\\n    area = length * width\\n    return area\\n\\nroom_area = calculate_area(10, 12)\\nprint(f"Room area: {room_area} sq ft")\\n\\n# Default parameters\\ndef introduce(name, age=0):\\n    if age > 0:\\n        return f"Hi, I am {name}, {age} years old"\\n    return f"Hi, I am {name}"\\n\\nprint(introduce("Bob"))\\nprint(introduce("Carol", 25))');
        
        addTemplate('08_classes.py', '# Classes - Object-Oriented Programming\\n\\n# Define a class\\nclass Dog:\\n    def __init__(self, name, age):\\n        self.name = name\\n        self.age = age\\n    \\n    def bark(self):\\n        return f"{self.name} says: Woof!"\\n    \\n    def describe(self):\\n        return f"{self.name} is {self.age} years old"\\n\\n# Create instances\\nmy_dog = Dog("Buddy", 3)\\nprint(my_dog.describe())\\nprint(my_dog.bark())\\n\\n# Another dog\\nother_dog = Dog("Luna", 5)\\nprint(other_dog.describe())');
        
        addTemplate('09_errors.py', '# Error Handling - Dealing with Problems\\n\\n# Basic error handling\\ndef divide(a, b):\\n    try:\\n        result = a / b\\n        return f"{a} / {b} = {result}"\\n    except ZeroDivisionError:\\n        return "Error: Cannot divide by zero!"\\n\\nprint(divide(10, 2))\\nprint(divide(10, 0))\\n\\n# Multiple error types\\ndef safe_convert(value):\\n    try:\\n        return int(value)\\n    except ValueError:\\n        return f"Cannot convert {value} to integer"\\n\\nprint(safe_convert("123"))\\nprint(safe_convert("abc"))');
        
        addTemplate('10_modules.py', '# Á¨¨ÂçÅËØæÔºöÊ®°Âùó - ‰ΩøÁî®PythonÊ†áÂáÜÂ∫ì\\n# Lesson 10: Modules - Using Python Standard Library\\n\\n# Ê®°ÂùóÊòØPythonÁöÑ‰ª£Á†ÅÂ∫ìÔºåÂåÖÂê´‰∫ÜÂæàÂ§öÊúâÁî®ÁöÑÂáΩÊï∞ÂíåÂ∑•ÂÖ∑\\n# Modules are Python code libraries containing many useful functions and tools\\n\\n# 1. Êï∞Â≠¶Ê®°Âùó (math)\\n# ================\\n\\nprint("=== Êï∞Â≠¶ËøêÁÆóÊ®°Âùó ===")\\nimport math\\n\\nprint("Âü∫Êú¨Êï∞Â≠¶Â∏∏Èáè:")\\nprint(f"ÂúÜÂë®Áéá œÄ: {math.pi}")\\nprint(f"Ëá™ÁÑ∂Êï∞ e: {math.e}")\\n\\nprint("\\\\nÂü∫Êú¨Êï∞Â≠¶ÂáΩÊï∞:")\\nprint(f"16ÁöÑÂπ≥ÊñπÊ†π: {math.sqrt(16)}")\\nprint(f"4.3Âêë‰∏äÂèñÊï¥: {math.ceil(4.3)}")\\nprint(f"4.7Âêë‰∏ãÂèñÊï¥: {math.floor(4.7)}")\\nprint(f"2ÁöÑ3Ê¨°Êñπ: {math.pow(2, 3)}")\\nprint(f"ÁªùÂØπÂÄº|-5|: {math.fabs(-5)}")\\n\\nprint("\\\\n‰∏âËßíÂáΩÊï∞ (ÂºßÂ∫¶Âà∂):")\\nprint(f"sin(œÄ/2): {math.sin(math.pi/2)}")\\nprint(f"cos(0): {math.cos(0)}")\\nprint(f"tan(œÄ/4): {math.tan(math.pi/4)}")\\n\\nprint("\\\\nËßíÂ∫¶ËΩ¨Êç¢:")\\ndegrees = 90\\nradians = math.radians(degrees)\\nprint(f"{degrees}Â∫¶ = {radians}ÂºßÂ∫¶")\\nprint(f"{radians}ÂºßÂ∫¶ = {math.degrees(radians)}Â∫¶")\\n\\n# 2. ÈöèÊú∫Êï∞Ê®°Âùó (random)\\n# ====================\\n\\nprint("\\\\n=== ÈöèÊú∫Êï∞Ê®°Âùó ===")\\nimport random\\n\\nprint("Âü∫Êú¨ÈöèÊú∫Êï∞:")\\nprint(f"0-1‰πãÈó¥ÁöÑÈöèÊú∫Â∞èÊï∞: {random.random()}")\\nprint(f"1-10‰πãÈó¥ÁöÑÈöèÊú∫Êï¥Êï∞: {random.randint(1, 10)}")\\nprint(f"1-100‰πãÈó¥ÁöÑÈöèÊú∫Êï¥Êï∞: {random.randrange(1, 101)}")\\n\\nprint("\\\\n‰ªéÂàóË°®‰∏≠ÈöèÊú∫ÈÄâÊã©:")\\nfruits = ["ËãπÊûú", "È¶ôËïâ", "Ê©ôÂ≠ê", "Ëë°ËêÑ", "ËçâËéì"]\\nprint(f"ÈöèÊú∫Ê∞¥Êûú: {random.choice(fruits)}")\\n\\n# ÈöèÊú∫ÈÄâÊã©Â§ö‰∏™Ôºà‰∏çÈáçÂ§çÔºâ\\nprint(f"ÈöèÊú∫ÈÄâÊã©3‰∏™Ê∞¥Êûú: {random.sample(fruits, 3)}")\\n\\nprint("\\\\nÊâì‰π±ÂàóË°®:")\\nnumbers = [1, 2, 3, 4, 5, 6]\\nprint(f"ÂéüÂßãÂàóË°®: {numbers}")\\nrandom.shuffle(numbers)\\nprint(f"Êâì‰π±Âêé: {numbers}")\\n\\n# 3. Êó•ÊúüÊó∂Èó¥Ê®°Âùó (datetime)\\n# ========================\\n\\nprint("\\\\n=== Êó•ÊúüÊó∂Èó¥Ê®°Âùó ===")\\nfrom datetime import datetime, timedelta\\n\\n# Ëé∑ÂèñÂΩìÂâçÊó∂Èó¥\\nnow = datetime.now()\\nprint(f"ÂΩìÂâçÊó∂Èó¥: {now}")\\nprint(f"ÂΩìÂâçÊó•Êúü: {now.date()}")\\nprint(f"ÂΩìÂâçÊó∂Èó¥: {now.time()}")\\n\\n# Ê†ºÂºèÂåñÊó∂Èó¥\\nprint(f"Ê†ºÂºèÂåñÊó∂Èó¥: {now.strftime(\\'%YÂπ¥%mÊúà%dÊó• %H:%M:%S\\')}")\\nprint(f"English format: {now.strftime(\\'%B %d, %Y at %I:%M %p\\')}")\\n\\n# Êó∂Èó¥ËÆ°ÁÆó\\ntomorrow = now + timedelta(days=1)\\nprint(f"ÊòéÂ§©: {tomorrow.strftime(\\'%Y-%m-%d\\')}")\\n\\nweek_ago = now - timedelta(weeks=1)\\nprint(f"‰∏ÄÂë®Ââç: {week_ago.strftime(\\'%Y-%m-%d\\')}")\\n\\n# ÁâπÂÆöÊó•Êúü\\nbirthday = datetime(2024, 1, 1)\\ndays_passed = (now - birthday).days\\nprint(f"Ë∑ùÁ¶ª2024Âπ¥1Êúà1Êó•Â∑≤ËøáÂéª {days_passed} Â§©")\\n\\n# 4. Â≠óÁ¨¶‰∏≤Ê®°Âùó (string)\\n# ===================\\n\\nprint("\\\\n=== Â≠óÁ¨¶‰∏≤Â∑•ÂÖ∑Ê®°Âùó ===")\\nimport string\\n\\nprint("Â≠óÁ¨¶‰∏≤Â∏∏Èáè:")\\nprint(f"Â∞èÂÜôÂ≠óÊØç: {string.ascii_lowercase}")\\nprint(f"Â§ßÂÜôÂ≠óÊØç: {string.ascii_uppercase}")\\nprint(f"ÊâÄÊúâÂ≠óÊØç: {string.ascii_letters}")\\nprint(f"Êï∞Â≠ó: {string.digits}")\\nprint(f"Ê†áÁÇπÁ¨¶Âè∑: {string.punctuation}")\\n\\nprint("\\\\nÁîüÊàêÈöèÊú∫ÂØÜÁ†Å:")\\n# ÂØÜÁ†ÅÂåÖÂê´Â≠óÊØçÂíåÊï∞Â≠ó\\npassword_chars = string.ascii_letters + string.digits\\npassword = \"\".join(random.choice(password_chars) for _ in range(8))\\nprint(f"8‰ΩçÈöèÊú∫ÂØÜÁ†Å: {password}")\\n\\n# Êõ¥Âº∫ÁöÑÂØÜÁ†ÅÔºàÂåÖÂê´ÁâπÊÆäÂ≠óÁ¨¶Ôºâ\\nstrong_chars = string.ascii_letters + string.digits + \"!@#$%\"\\nstrong_password = \"\".join(random.choice(strong_chars) for _ in range(12))\\nprint(f"12‰ΩçÂº∫ÂØÜÁ†Å: {strong_password}")\\n\\n# 5. Êìç‰ΩúÁ≥ªÁªüÊ®°Âùó (os)\\n# ==================\\n\\nprint("\\\\n=== Êìç‰ΩúÁ≥ªÁªüÊ®°Âùó ===")\\nimport os\\n\\nprint("Á≥ªÁªü‰ø°ÊÅØ:")\\nprint(f\"Êìç‰ΩúÁ≥ªÁªüÂêçÁß∞: {os.name}\")\\n# print(f\"ÂΩìÂâçÂ∑•‰ΩúÁõÆÂΩï: {os.getcwd()}\")  # Âú®WebÁéØÂ¢É‰∏≠ÂèØËÉΩ‰∏çÂèØÁî®\\n\\n# ÁéØÂ¢ÉÂèòÈáèÔºàÊ®°ÊãüÔºâ\\nprint(\"\\\\nÁéØÂ¢ÉÂèòÈáèÁ§∫‰æã:\")\\nprint(f\"PATHÂèòÈáèÈïøÂ∫¶: {len(os.environ.get(\\'PATH\\', \\'\\'))}\")\\n\\n# Ë∑ØÂæÑÊìç‰Ωú\\nprint(\"\\\\nË∑ØÂæÑÊìç‰Ωú:\")\\nfile_path = \"/home/user/documents/file.txt\"\\nprint(f\"ÂÆåÊï¥Ë∑ØÂæÑ: {file_path}\")\\nprint(f\"ÁõÆÂΩïÈÉ®ÂàÜ: {os.path.dirname(file_path)}\")\\nprint(f\"Êñá‰ª∂Âêç: {os.path.basename(file_path)}\")\\nprint(f\"Êñá‰ª∂ÂêçÂíåÊâ©Â±ïÂêç: {os.path.splitext(os.path.basename(file_path))}")\\n\\n# 6. JSONÊ®°Âùó\\n# ==========\\n\\nprint("\\\\n=== JSONÊï∞ÊçÆÂ§ÑÁêÜ ===")\\nimport json\\n\\n# PythonÂØπË±°ËΩ¨JSON\\nstudent_data = {\\n    \"ÂßìÂêç\": \"Âº†Â∞èÊòé\",\\n    \"Âπ¥ÈæÑ\": 16,\\n    \"ÊàêÁª©\": {\\n        \"ËØ≠Êñá\": 85,\\n        \"Êï∞Â≠¶\": 92,\\n        \"Ëã±ËØ≠\": 78\\n    },\\n    \"Áà±Â•Ω\": [\"ÈòÖËØª\", \"ÁºñÁ®ã\", \"ËøêÂä®\"]\\n}\\n\\n# ËΩ¨Êç¢‰∏∫JSONÂ≠óÁ¨¶‰∏≤\\njson_string = json.dumps(student_data, ensure_ascii=False, indent=2)\\nprint(\"PythonÂØπË±°ËΩ¨JSON:\")\\nprint(json_string)\\n\\n# JSONÂ≠óÁ¨¶‰∏≤ËΩ¨PythonÂØπË±°\\nloaded_data = json.loads(json_string)\\nprint(f\"\\\\nJSONËΩ¨PythonÂØπË±°:\")\\nprint(f\"Â≠¶ÁîüÂßìÂêç: {loaded_data[\\'ÂßìÂêç\\']}\")\\nprint(f\"Êï∞Â≠¶ÊàêÁª©: {loaded_data[\\'ÊàêÁª©\\'][\\'Êï∞Â≠¶\\']}\")\\n\\n# 7. Ê≠£ÂàôË°®ËææÂºèÊ®°Âùó (re)\\n# ====================\\n\\nprint("\\\\n=== Ê≠£ÂàôË°®ËææÂºèÊ®°Âùó ===")\\nimport re\\n\\n# Êü•ÊâæÊ®°Âºè\\ntext = \"ÊàëÁöÑÁîµËØùÊòØ138-1234-5678ÔºåÈÇÆÁÆ±ÊòØzhang@example.com\"\\n\\n# Êü•ÊâæÁîµËØùÂè∑Á†Å\\nphone_pattern = r\"\\\\d{3}-\\\\d{4}-\\\\d{4}\"\\nphone_match = re.search(phone_pattern, text)\\nif phone_match:\\n    print(f\"ÊâæÂà∞ÁîµËØùÂè∑Á†Å: {phone_match.group()}\")\\n\\n# Êü•ÊâæÈÇÆÁÆ±\\nemail_pattern = r\"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}\"\\nemail_match = re.search(email_pattern, text)\\nif email_match:\\n    print(f\"ÊâæÂà∞ÈÇÆÁÆ±: {email_match.group()}\")\\n\\n# ÊõøÊç¢ÊñáÊú¨\\noriginal = \"‰ªäÂ§©Â§©Ê∞îÂæàÂ•ΩÔºåÊòéÂ§©Â§©Ê∞î‰πüÂæàÂ•Ω\"\\nreplaced = re.sub(r\"Â§©Ê∞î\", \"ÂøÉÊÉÖ\", original)\\nprint(f\"ÂéüÊñá: {original}\")\\nprint(f\"ÊõøÊç¢Âêé: {replaced}\")\\n\\n# 8. ÈõÜÂêàÊìç‰Ωú\\n# ==========\\n\\nprint(\"\\\\n=== ÈõÜÂêàËøêÁÆóÁ§∫‰æã ===")\\n\\n# ‰ΩøÁî®ÈõÜÂêàÂéªÈáçÂíåËøêÁÆó\\nclass1_students = {\"Âº†‰∏â\", \"ÊùéÂõõ\", \"Áéã‰∫î\", \"ËµµÂÖ≠\"}\\nclass2_students = {\"Áéã‰∫î\", \"ËµµÂÖ≠\", \"Èí±‰∏É\", \"Â≠ôÂÖ´\"}\\n\\nprint(f\"1Áè≠Â≠¶Áîü: {class1_students}\")\\nprint(f\"2Áè≠Â≠¶Áîü: {class2_students}\")\\nprint(f\"‰∏§Áè≠ÈÉΩÊúâÁöÑÂ≠¶Áîü: {class1_students & class2_students}\")\\nprint(f\"ÊâÄÊúâÂ≠¶Áîü: {class1_students | class2_students}\")\\nprint(f\"Âè™Âú®1Áè≠ÁöÑÂ≠¶Áîü: {class1_students - class2_students}\")\\n\\n# 9. ÂÆûÁî®Â∑•ÂÖ∑ÂáΩÊï∞\\n# =============\\n\\nprint(\"\\\\n=== ÂÆûÁî®Â∑•ÂÖ∑ÂáΩÊï∞ ===")\\n\\ndef generate_student_id():\\n    \"\"\"ÁîüÊàêÂ≠¶ÁîüÂ≠¶Âè∑\"\"\"\\n    year = datetime.now().year\\n    random_num = random.randint(1000, 9999)\\n    return f\"S{year}{random_num}\"\\n\\ndef format_score_report(name, scores):\\n    \"\"\"Ê†ºÂºèÂåñÊàêÁª©Êä•Âëä\"\"\"\\n    total = sum(scores.values())\\n    average = total / len(scores)\\n    \\n    report = f\"Â≠¶Áîü: {name}\\\\n\"\\n    report += \"-\" * 20 + \"\\\\n\"\\n    \\n    for subject, score in scores.items():\\n        report += f\"{subject}: {score:>6.1f}ÂàÜ\\\\n\"\\n    \\n    report += \"-\" * 20 + \"\\\\n\"\\n    report += f\"ÊÄªÂàÜ: {total:>6.1f}ÂàÜ\\\\n\"\\n    report += f\"Âπ≥ÂùáÂàÜ: {average:>4.1f}ÂàÜ\"\\n    \\n    return report\\n\\ndef calculate_time_difference(start_time_str, end_time_str):\\n    \"\"\"ËÆ°ÁÆóÊó∂Èó¥Â∑Æ\"\"\"\\n    start = datetime.strptime(start_time_str, \"%H:%M\")\\n    end = datetime.strptime(end_time_str, \"%H:%M\")\\n    \\n    # Â§ÑÁêÜË∑®Â§©ÊÉÖÂÜµ\\n    if end < start:\\n        end += timedelta(days=1)\\n    \\n    duration = end - start\\n    hours = duration.seconds // 3600\\n    minutes = (duration.seconds % 3600) // 60\\n    \\n    return f\"{hours}Â∞èÊó∂{minutes}ÂàÜÈíü\"\\n\\n# ÊµãËØïÂ∑•ÂÖ∑ÂáΩÊï∞\\nprint(f\"ÈöèÊú∫Â≠¶Âè∑: {generate_student_id()}\")\\nprint(f\"Âè¶‰∏Ä‰∏™Â≠¶Âè∑: {generate_student_id()}\")\\n\\ntest_scores = {\"ËØ≠Êñá\": 85, \"Êï∞Â≠¶\": 92, \"Ëã±ËØ≠\": 78, \"Áâ©ÁêÜ\": 88}\\nprint(f\"\\\\n{format_score_report(\\'Âº†Â∞èÊòé\\', test_scores)}\")\\n\\nprint(f\"\\\\nÊó∂Èó¥Â∑ÆËÆ°ÁÆó:\")\\nprint(f\"09:00Âà∞17:30ÁöÑÊó∂Èïø: {calculate_time_difference(\\'09:00\\', \\'17:30\\')}\")\\nprint(f\"23:00Âà∞01:30ÁöÑÊó∂Èïø: {calculate_time_difference(\\'23:00\\', \\'01:30\\')}\")\\n\\n# 10. ÁªÉ‰π†È¢ò\\n# =========\\nprint(\"\\\\n=== ÁªÉ‰π†Êó∂Èó¥ ===")\\n\\n# ÁªÉ‰π†1ÔºöÁîüÊàêÂπ∏ËøêÊï∞Â≠ó\\nlucky_numbers = random.sample(range(1, 50), 6)\\nlucky_numbers.sort()\\nprint(f\"‰ªäÊó•Âπ∏ËøêÊï∞Â≠ó: {lucky_numbers}\")\\n\\n# ÁªÉ‰π†2ÔºöËÆ°ÁÆóÂπ¥ÈæÑ\\ndef calculate_age(birth_year):\\n    current_year = datetime.now().year\\n    return current_year - birth_year\\n\\ntest_years = [1990, 2000, 2010, 2015]\\nfor year in test_years:\\n    age = calculate_age(year)\\n    print(f\"{year}Âπ¥Âá∫ÁîüÁöÑ‰∫∫‰ªäÂπ¥{age}Â≤Å\")\\n\\n# ÊåëÊàòÔºöÂàõÂª∫‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂ≠¶ÁîüÁÆ°ÁêÜÁ≥ªÁªüÔºåÁªìÂêàÊâÄÊúâÂ≠¶Âà∞ÁöÑÊ®°ÂùóÁü•ËØÜ');
        
        console.log('Templates loaded with proper formatting:', Object.keys(window.exampleTemplates).length);
        
        // Templates now loaded safely above

        // Initialize Monaco Editor with better error handling
        function initMonacoEditor() {
            try {
                if (typeof require === 'undefined') {
                    console.error('RequireJS not loaded, using fallback editor');
                    createFallbackEditor();
                    return;
                }
                
                require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs' } });
                require(['vs/editor/editor.main'], function() {
                    try {
                        editor = monaco.editor.create(document.getElementById('editor'), {
                            value: '',
                            language: 'python',
                            theme: 'vs-dark',
                            automaticLayout: true,
                            minimap: { enabled: false },
                            fontSize: 14
                        });
                        
                        console.log('Monaco editor initialized successfully');
                        
                        // Make editor globally accessible
                        window.editor = editor;
                        
                        // Load welcome file initially
                        window.loadFile('welcome.py');
                        
                    } catch (error) {
                        console.error('Monaco editor creation failed:', error);
                        createFallbackEditor();
                    }
                }, function(error) {
                    console.error('Monaco editor module loading failed:', error);
                    createFallbackEditor();
                });
                
            } catch (error) {
                console.error('Monaco editor initialization failed:', error);
                createFallbackEditor();
            }
        }
        
        function createFallbackEditor() {
            console.log('Creating fallback textarea editor');
            const editorContainer = document.getElementById('editor');
            editorContainer.innerHTML = '<textarea id="fallback-editor" style="width:100%;height:100%;background:#1e1e1e;color:#d4d4d4;border:none;font-family:monospace;font-size:14px;padding:10px;resize:none;"></textarea>';
            const fallbackEditor = document.getElementById('fallback-editor');
            
            // Create a simple editor object to match Monaco's interface
            editor = {
                setValue: (value) => { fallbackEditor.value = value; },
                getValue: () => fallbackEditor.value,
                layout: () => {}
            };
            
            // Make editor globally accessible
            window.editor = editor;
            
            console.log('Fallback editor created');
            
            // Load welcome file
            window.loadFile('welcome.py');
        }
        
        // Try to initialize Monaco, with fallback after timeout
        initMonacoEditor();
        
        // Fallback timeout if Monaco takes too long
        setTimeout(() => {
            if (!window.editor) {
                console.log('Monaco editor timeout, creating fallback');
                createFallbackEditor();
            }
        }, 10000);

        // Replace the early loadFile function with full implementation
        window.loadFile = function loadFile(filename) {
            console.log('loadFile called with:', filename);
            
            // Load content if not already loaded
            if (!window.files.has(filename) && window.exampleTemplates[filename]) {
                window.files.set(filename, window.exampleTemplates[filename]);
                console.log('Loaded content for:', filename, 'Length:', window.exampleTemplates[filename].length);
            } else if (!window.exampleTemplates[filename]) {
                console.error('No template found for:', filename);
                return;
            }
            
            // Manage tab limits
            if (!window.openTabs.includes(filename)) {
                if (window.openTabs.length >= maxOpenTabs) {
                    const oldestTab = window.openTabs.shift();
                    cleanupFile(oldestTab);
                }
                window.openTabs.push(filename);
            }
            
            window.currentFile = filename;
            
            // Try to set editor content with fallback
            const content = window.files.get(filename) || '';
            if (window.editor && window.editor.setValue) {
                try {
                    window.editor.setValue(content);
                    console.log('Editor content set successfully');
                } catch (error) {
                    console.error('Error setting editor content:', error);
                }
            } else {
                console.log('Editor not ready, waiting...');
                // Wait for editor to be ready
                let attempts = 0;
                const waitForEditor = setInterval(() => {
                    attempts++;
                    if (window.editor && window.editor.setValue) {
                        try {
                            window.editor.setValue(content);
                            console.log('Editor content set after waiting');
                            clearInterval(waitForEditor);
                        } catch (error) {
                            console.error('Error setting editor content after waiting:', error);
                            clearInterval(waitForEditor);
                        }
                    } else if (attempts > 50) { // 5 seconds max
                        console.error('Editor never became ready');
                        clearInterval(waitForEditor);
                    }
                }, 100);
            }
            
            updateTabs();
            window.updateFileTree();
            updateMemoryInfo();
            
            console.log('loadFile completed. Current file:', window.currentFile, 'Files in memory:', window.files.size);
        };

        // Clean up file content when tab is closed
        function cleanupFile(filename) {
            if (window.exampleTemplates[filename] && filename !== window.currentFile) {
                window.files.delete(filename);
            }
            updateMemoryInfo();
        }

        // Memory management
        function updateMemoryInfo() {
            const memUsage = (window.files.size * 2 + terminalLineCount * 0.1).toFixed(1);
            memoryInfo.textContent = `Memory: ${memUsage} KB`;
        }

        function clearMemory() {
            // Clear all files except current
            const currentContent = window.files.get(window.currentFile);
            window.files.clear();
            if (window.currentFile && currentContent) {
                window.files.set(window.currentFile, currentContent);
            }
            
            // Clear terminal
            clearTerminal();
            
            // Close all tabs except current
            if (window.currentFile) {
                window.openTabs = [window.currentFile];
            } else {
                window.openTabs = [];
            }
            
            updateTabs();
            updateMemoryInfo();
            addTerminalOutput('Memory cleared!', 'success');
        }

        function addTerminalOutput(text, className = '') {
            // Limit terminal history
            if (terminalLineCount >= maxTerminalLines) {
                const lines = terminalOutput.children;
                while (lines.length > maxTerminalLines * 0.8) {
                    terminalOutput.removeChild(lines[0]);
                    terminalLineCount--;
                }
            }
            
            const line = document.createElement('div');
            line.textContent = text;
            if (className) line.className = className;
            terminalOutput.appendChild(line);
            terminalOutput.parentElement.scrollTop = terminalOutput.parentElement.scrollHeight;
            terminalLineCount++;
            updateMemoryInfo();
        }

        async function initPython() {
            try {
                addTerminalOutput('Initializing Python environment...', 'info');
                
                if (typeof loadPyodide === 'undefined') {
                    throw new Error('Pyodide library not loaded. Check internet connection.');
                }
                
                pyodide = await loadPyodide({
                    indexURL: "https://cdn.jsdelivr.net/pyodide/v0.24.1/full/"
                });

                addTerminalOutput('Pyodide loaded, setting up environment...', 'info');

                pyodide.runPython(`
                    import sys
                    import os
                    from js import console

                    os.makedirs('/home/user', exist_ok=True)
                    os.chdir('/home/user')
                    
                    class JSConsole:
                        def write(self, text):
                            console.log(text)
                            return len(text)
                        
                        def flush(self):
                            pass
                    
                    sys.stdout = JSConsole()
                    sys.stderr = JSConsole()
                `);

                const originalLog = console.log;
                console.log = function(text) {
                    if (text && text.trim()) {
                        addTerminalOutput(text, 'output');
                    }
                    originalLog.apply(console, arguments);
                };

                addTerminalOutput('‚úÖ Python environment loaded successfully!', 'success');
                addTerminalOutput('‚úÖ Memory-optimized version ready!', 'success');
                addTerminalOutput('‚úÖ You can now run Python code!', 'success');
                addTerminalOutput('');
                
                terminalInputLine.style.display = 'flex';
                terminalInput.focus();
                
                // Make pyodide globally accessible for debugging
                window.pyodide = pyodide;
                
            } catch (error) {
                addTerminalOutput('‚ùå Error loading Python: ' + error.message, 'error');
                addTerminalOutput('üí° Try refreshing the page or check your internet connection.', 'info');
                console.error('Pyodide initialization error:', error);
            }
        }

        async function runCode() {
            if (!pyodide) {
                addTerminalOutput('Python environment not ready yet', 'error');
                return;
            }

            const code = editor.getValue();
            saveFile();
            
            addTerminalOutput(`\\n>>> Running ${window.currentFile}...`, 'success');
            
            try {
                pyodide.FS.writeFile(`/home/user/${window.currentFile}`, code);
                await pyodide.runPythonAsync(code);
            } catch (error) {
                addTerminalOutput(error.message, 'error');
            }
            
            addTerminalOutput('');
        }

        async function executeTerminalCommand(command) {
            addTerminalOutput('>>> ' + command);
            
            try {
                if (command.trim() === 'clear') {
                    clearTerminal();
                    return;
                }
                
                if (command.trim() === 'ls') {
                    const fileList = Array.from(window.files.keys()).join('\\n');
                    addTerminalOutput(fileList || 'No files loaded');
                    return;
                }
                
                if (command.trim() === 'memory') {
                    addTerminalOutput(`Files in memory: ${window.files.size}`);
                    addTerminalOutput(`Open tabs: ${window.openTabs.length}/${maxOpenTabs}`);
                    addTerminalOutput(`Terminal lines: ${terminalLineCount}/${maxTerminalLines}`);
                    return;
                }
                
                let result = await pyodide.runPythonAsync(command);
                if (result !== undefined && result !== null) {
                    addTerminalOutput(String(result));
                }
            } catch (error) {
                addTerminalOutput(error.message, 'error');
            }
        }

        function newFile() {
            document.getElementById('newFileModal').style.display = 'block';
            document.getElementById('newFileName').focus();
        }

        function createFile() {
            const fileName = document.getElementById('newFileName').value.trim();
            if (!fileName) return;
            
            if (!fileName.endsWith('.py')) {
                alert('Please use .py extension for Python files');
                return;
            }
            
            if (window.files.has(fileName)) {
                alert('File already exists');
                return;
            }
            
            window.files.set(fileName, '# ' + fileName + '\\n\\n');
            loadFile(fileName);
            closeModal();
            updateFileTree();
        }

        function saveFile() {
            if (window.currentFile) {
                window.files.set(window.currentFile, editor.getValue());
                addTerminalOutput(`Saved ${window.currentFile}`, 'success');
                
                if (pyodide) {
                    try {
                        pyodide.FS.writeFile(`/home/user/${window.currentFile}`, editor.getValue());
                    } catch (error) {
                        console.error('Error saving to filesystem:', error);
                    }
                }
            }
        }

        function openTab(fileName) {
            loadFile(fileName);
        }

        function closeTab(fileName, event) {
            event.stopPropagation();
            const index = window.openTabs.indexOf(fileName);
            if (index > -1) {
                window.openTabs.splice(index, 1);
                cleanupFile(fileName);
            }
            
            if (window.currentFile === fileName && window.openTabs.length > 0) {
                loadFile(window.openTabs[window.openTabs.length - 1]);
            } else if (window.openTabs.length === 0) {
                window.currentFile = null;
                editor.setValue('');
                updateTabs();
                updateFileTree();
            }
        }

        function updateTabs() {
            const tabsContainer = document.getElementById('tabs');
            tabsContainer.innerHTML = '';
            
            window.openTabs.forEach(fileName => {
                const tab = document.createElement('div');
                tab.className = 'tab' + (fileName === window.currentFile ? ' active' : '');
                tab.onclick = () => openTab(fileName);
                
                tab.innerHTML = `
                    <span>${fileName}</span>
                    <span class="tab-close" onclick="closeTab('${fileName}', event)">√ó</span>
                `;
                
                tabsContainer.appendChild(tab);
            });
        }

        // Replace the early updateFileTree function with full implementation
        window.updateFileTree = function updateFileTree() {
            const fileTree = document.getElementById('file-tree');
            fileTree.innerHTML = '';
            
            window.exampleFiles.forEach(fileName => {
                const li = document.createElement('li');
                li.className = 'file-item' + (fileName === window.currentFile ? ' active' : '');
                li.onclick = () => loadFile(fileName);
                
                const isLoaded = window.files.has(fileName);
                const icon = isLoaded ? 'üìÑ' : 'üìã';
                li.innerHTML = `<span class="file-icon">${icon}</span> ${fileName}`;
                fileTree.appendChild(li);
            });
        };

        function clearTerminal() {
            terminalOutput.innerHTML = '';
            terminalLineCount = 0;
            updateMemoryInfo();
        }

        function closeModal() {
            document.getElementById('newFileModal').style.display = 'none';
            document.getElementById('newFileName').value = '';
        }

        // Terminal input handler
        terminalInput.addEventListener('keydown', async (e) => {
            if (e.key === 'Enter') {
                const command = terminalInput.value.trim();
                if (command) {
                    terminalInput.value = '';
                    await executeTerminalCommand(command);
                }
            }
        });

        // Modal handlers
        document.getElementById('newFileName').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                createFile();
            } else if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Resize handler
        let isResizing = false;
        const resizeHandle = document.getElementById('resize-handle');
        const editorDiv = document.getElementById('editor');
        const terminalContainer = document.getElementById('terminal-container');

        resizeHandle.addEventListener('mousedown', (e) => {
            isResizing = true;
            document.body.style.cursor = 'col-resize';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            
            const containerWidth = document.getElementById('editor-container').offsetWidth;
            const newEditorWidth = e.clientX - editorDiv.offsetLeft;
            const percentage = (newEditorWidth / containerWidth) * 100;
            
            if (percentage > 20 && percentage < 80) {
                editorDiv.style.width = percentage + '%';
                terminalContainer.style.width = (100 - percentage) + '%';
                editor.layout();
            }
        });

        document.addEventListener('mouseup', () => {
            isResizing = false;
            document.body.style.cursor = 'default';
        });

        // Initialize file tree immediately on page load with debugging
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded fired');
            console.log('exampleFiles available:', !!window.exampleFiles);
            console.log('exampleTemplates available:', !!window.exampleTemplates);
            console.log('updateFileTree available:', !!window.updateFileTree);
            
            if (window.updateFileTree) {
                window.updateFileTree();
                console.log('updateFileTree called');
            } else {
                console.error('updateFileTree not available');
                // Fallback: manually populate file tree
                setTimeout(function() {
                    if (window.exampleFiles && window.updateFileTree) {
                        window.updateFileTree();
                        console.log('updateFileTree called via fallback');
                    }
                }, 1000);
            }
        });

        // Initialize Python when page loads
        initPython();
    </script>
</body>
</html>